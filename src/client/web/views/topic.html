<div class="content-body">
    <section class="forum-listing">
        
        <section class="forum-group">
            <h1 class="board-title {{ board.icon }}" ng-style="board.iconStyle">{{ board.name }} - {{ topic.title }}</h1>
            <article class="topic board">
                <header>
                    <a class="thread-post" ng-href="{{ topic.url + '#' + topic.id }}">
                        <time class="thread-time" datetime="{{ topic.time * 1000 | date }}">{{ topic.time * 1000 | date:'medium' }}</time>
                    </a>
                </header>
                <div class="post-body">
                    <p ng-bind-html-unsafe="topic.content"></p>
                </div>
            </article>

            <ul class="board-list">
                <li class="board" ng-repeat="post in posts">
                    <header>
                        <a class="thread-post" ng-href="{{ post.url + '#' + post.id }}">
                            <time class="thread-time" datetime="{{ post.time * 1000 | date }}">{{ post.time * 1000 | date:'medium' }}</time>
                        </a>
                        <a class="thread-name" ng-href="{{ post.url }}">{{ post.title }}</a>
                    </header>
                    <forumuserprofile user="post.user"/>
                    <article class="postcontent" ng-bind-html-unsafe="post.content">
                        
                     <span class="signature">{{post.user.sig}}</span>
                     </article>
                     <br class="clear">
                </li>
            </ul>
        </section>
    </section>
    <br class="clear">
    <div ng-show="currentUser.$hasRole('EDITOR')">
    <button ng-show="!topic.locked" ng-click="lock()">Lock topic</button>
    <button ng-show="topic.locked" ng-click="unlock()">Unlock topic</button>
    <button ng-show="!topic.sticky" ng-click="sticky()">Sticky topic</button>
    <button ng-show="topic.sticky" ng-click="unsticky()">Unsticky topic</button>
</div>
    <section ng-show="currentUser.authenticated && !topic.locked" class="new-topic-form">
        <div ng-controller="CollapseControl">
            <button class="btn" ng-click="isCollapsed = !isCollapsed">New Reply</button>
            <hr>
            <div collapse="isCollapsed">
                <post-editor board="board.id" topic="topic.id"/>
            </div>
        </div>
    </section>
</div>